
imports:
- path: cluster.py

resources:
- name: test
  type: cluster.py
  properties:
    region: us-central1
    network: projects/alarbi-dev/global/networks/default #put-the-region 
    nodePools:
    - name: 'standard-1-4'
      config:
        machineType: n1-standard-4
        labels:
          role: k8s-node
          env: test
          owner: alioua
          bu: infrastructure-services
          impact: medium
          data: private
          type: n1-standard-4
      autoscaling:
        enabled: true
        minNodeCount: 2
        maxNodeCount: 10
    - name: 'standard-1-8-preemptible'
      config:
        machineType: n1-standard-8
        preemptible: true
        taints:
        - effect: NO_SCHEDULE
          key: preemtible #preemptible
          value: 'true'
        labels:
          role: k8s-node
          env: prod
          owner: alioua
          bu: infrastructure-services
          impact: medium
          data: private
      autoscaling:
        enabled: true
        minNodeCount: 2
        maxNodeCount: 3
    ipAllocationPolicy:
      useIpAliases: true
      createSubnetwork: true
      subnetworkName: 'my-cluster'
      nodeIpv4CidrBlock: 10.9.0.0/22
      clusterIpv4CidrBlock: 10.16.0.0/14
      servicesIpv4CidrBlock: 10.8.32.0/20
